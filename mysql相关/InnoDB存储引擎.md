
- 关于统计数 count

MyISAM 会直接存储总行数，InnoDB 则不会，需要按行扫描

只有查询全表的总行数，MyISAM 才会直接返回结果，当加了 where 条件后，两种存储引擎的处理方式类似，因此不管哪种存储引擎，都要建立好索引

- 关于全文索引

MyISAM 支持全文索引，InnoDB5.6 之前不支持全文索引，如果需要全文搜索可以使用 ES


- 关于事务

MyISAM 不支持事务，InnoDB 支持事务（对数据一致性有要求），这是 MySQL 将默认存储引擎从 MyISAM 变成 InnoDB 的重要原因之一

- 关于外键

MyISAM 不支持外键，InnoDB 支持外键

不管哪种存储引擎，在数据量大并发量大的情况下，都不应该使用外键，而建议由应用程序保证完整性

- 关于行锁与表锁

MyISAM 只支持表锁，InnoDB 可以支持行锁

MyISAM：执行读写SQL语句时，会对表加锁，所以数据量大，并发量高时，性能会急剧下降

InnoDB：细粒度行锁，在数据量大，并发量高时，性能比较优异

注意：

InnoDB 的行锁是实现在索引上的，而不是锁在物理行记录上

如果访问没有命中索引，也无法使用行锁，将要退化为表锁，因此 InnoDB 务必建好索引，否则锁粒度较大，会影响并发

- 关于聚集索引

聚集索引并不是一种单独的索引类型，而是一种数据存储方式(不是数据结构，而是存储结构)，具体细节依赖于其实现方式，聚集索引实际上是在同一个结构中保存了 btree 索引和数据行

InnoDB 将通过主键聚集数据，如果没有定义主键，InnoDB 会选择第一个非空的唯一索引代替，如果没有非空唯一索引，InnoDB 会隐式定义一个6字节的 Rowid 主键来作为聚集索引

叶子页包含了行的全部数据，但是节点页只包含了索引列(或者可以说非叶子节点的节点页包含的是索引值的索引，因为这些节点页包含的值是从索引列中提取出来的)

因为聚集索引和表数据是放在一起的，所以一个表中只能有一个聚集索引

InnoDB 是聚集索引，MyISAM 是非聚集索引。聚集索引的数据存放在主键索引的叶子节点上，因此 InnoDB 必须要有主键，通过主键索引效率很高。但是二级索引需要两次查询，先查询到主键，然后再通过主键查询到数据。因此，主键不应该过大，因为主键太大，其他索引也都会很大。而 MyISAM 是非聚集索引，索引和数据是分离的，索引保存的是数据文件的指针，主键索引和二级索引是独立的

InnoDB 的普通索引，叶子节点存储了索引的值，所以需要分两次查询才能找到数据
